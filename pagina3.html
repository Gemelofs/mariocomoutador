<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>PÃ¡gina 3 - Mini Juego</title>
<style>
body{ font-family:"Press Start 2P", Arial,sans-serif; background:linear-gradient(to bottom,#ff0000,#0033ff); color:white; text-align:center; }
#contadorGlobal{ background:yellow;color:black;padding:12px 20px;border-radius:10px;border:4px solid black;font-size:20px;width:220px;margin:20px auto;font-weight:bold; box-shadow:0 0 10px #000; }
.contenedor-juego{ background:rgba(0,0,0,0.55); padding:25px; width:80%; max-width:900px; margin:20px auto 40px; border-radius:20px; border:4px solid #ffd700; box-shadow:0 0 12px #ffd700; }
.pregunta{ background:rgba(255,255,255,0.15); padding:15px; border-radius:12px; border:3px solid #ffd700; margin:20px 0; }
.pregunta h3{ color:#ffd700; }
.mario-img{ width:260px; margin-bottom:20px; filter:drop-shadow(0 0 10px #000); }
button, .btn{ background:#ff0000; border:4px solid #ffe066; padding:14px 30px; font-size:14px; color:white; font-weight:bold; border-radius:10px; cursor:pointer; margin:8px; transition:.2s; }
button:hover, .btn:hover{ background:#ff3b3b; transform:scale(1.1); }
#final{ display:none; background:white;color:black; padding:25px; margin-top:20px; border-radius:15px; border:4px solid #0033ff; }
.mensaje{ margin-top:10px; font-weight:bold; font-size:16px; }
.correcto{ color:#00ff00; }
.incorrecto{ color:#ff0000; }
</style>
<script>
let preguntasRespondidas=0; const totalPreguntas=3;
function initPuntos(){ if(!localStorage.getItem("puntosMario")) localStorage.setItem("puntosMario","0"); updateCounterDisplay(); }
function addPointsIfNotScored(flag,pts){ if(!localStorage.getItem(flag)){ let actuales=parseInt(localStorage.getItem("puntosMario")||"0",10); actuales+=pts; localStorage.setItem("puntosMario",actuales); localStorage.setItem(flag,"1"); return true;} return false; }
function updateCounterDisplay(){ document.getElementById("contadorGlobal").innerText="Puntos: "+(localStorage.getItem("puntosMario")||0);}
window.onload=initPuntos;

function respuesta(btn,qId,esCorrecto){
    const contenedor=btn.closest(".pregunta");
    let mensaje=document.createElement("div"); mensaje.className="mensaje";
    if(esCorrecto){ mensaje.innerText="âœ… Correcto!"; mensaje.classList.add("correcto"); addPointsIfNotScored("p3_"+qId,5);}
    else{ mensaje.innerText="âŒ Incorrecto!"; mensaje.classList.add("incorrecto");}
    contenedor.appendChild(mensaje);
    contenedor.querySelectorAll("button").forEach(b=>b.disabled=true);
    preguntasRespondidas++; updateCounterDisplay(); verificarFin();
}

function verificarFin(){
    if(preguntasRespondidas>=totalPreguntas){
        document.getElementById("juego").style.display="none";
        document.getElementById("final").style.display="block";
        document.getElementById("resultado-final").innerText="Tu puntaje final es: "+(localStorage.getItem("puntosMario")||0)+" puntos ðŸŽ‰";
    }
}

function reiniciarJuegoCompleto(){
    localStorage.clear(); // borra todos los puntos y flags
    window.location.href="pagina1.html";
}
</script>
</head>
<body>

<div id="contadorGlobal">Puntos: 0</div>
<div class="contenedor-juego">
<h1 style="color:#ffd700;">Mini Juego Final</h1>
<img src="img/mario2.jpg" class="mario-img" alt="Mario">
<div id="juego">
<div class="pregunta"><h3>1. Â¿QuÃ© pieza almacena datos?</h3>
<button onclick="respuesta(this,'q1',false)">RAM</button>
<button onclick="respuesta(this,'q1',true)">Disco</button>
</div>
<div class="pregunta"><h3>2. Â¿QuÃ© alimenta el computador?</h3>
<button onclick="respuesta(this,'q2',true)">Fuente de Poder</button>
<button onclick="respuesta(this,'q2',false)">Procesador</button>
</div>
<div class="pregunta"><h3>3. Â¿CuÃ¡l es el cerebro?</h3>
<button onclick="respuesta(this,'q3',true)">CPU</button>
<button onclick="respuesta(this,'q3',false)">Disco</button>
</div>
</div>

<div id="final">
<h2>ðŸŽ‰ Â¡Juego Terminado!</h2>
<p id="resultado-final"></p>
<a href="javascript:reiniciarJuegoCompleto()" class="btn">ðŸ”„ Volver a presentar</a>
</div>
</div>
</body>
</html>
